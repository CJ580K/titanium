<html>
<head>
<title>My Title</title>
<script src="test.js"></script>
<script src="app:test.js"></script>
<script src="gears_init.js"></script>
<script src="notification.js"></script>
</head>
<body onunload="alert('unloaded')" xonload="alert('loaded')">

<h1>Hello world</h1>
<div id="status">Database results will go here</div>
<form>
	<input type="text" value="" id="name"/>
</form>

<script>
   ti.ready(function($)
   {
         var db = new ti.Database;
         db.open("jeff-test");
         db.execute("create table if not exists Test (Phrase text, Timestamp int)");
         db.execute("insert into Test values(?,?)", ['Jeff',new Date().getTime()]);
         var rs = db.execute("select count(*) from Test");
         while (rs.isValidRow())
         {
            $("#status").html("Found " + rs.field(0) + " database entries");
            rs.next();
         }
         rs.close();

			ti.Menu.createTrayMenu('tray.png', null, function()
			{
				//alert("w00t!");
				if (ti.Window.currentWindow.isVisible())
				{
					ti.Window.currentWindow.hide();
				}
				else
				{
					ti.Window.currentWindow.show();
				}
			});

			try
			{
					var count = 4;
					var notification = new window.foo.Notification;
					var ps = count > 1 ? 's':'';
					notification.setTitle('New Tweet'+ps+' received');
					notification.setMessage(count+' new tweet'+ps+' received');
					notification.setIcon('app://notification.png');
					notification.show();
			}
			catch (E)
			{
				alert(E);
			}

			try
			{
				var menu = ti.Menu.createAppMenu("Window");
				menu.setTitle("foo");
				var item = menu.addItem("Jeff");
				var sep = menu.addSeparator();
				menu.removeSeparator(sep);
				item.setTitle("Jeff Haynie");	
				item.setAction(function()
				{
					alert("W000T!");
				});


				var sound = ti.Media.createSound("app://test.mp3");
				sound.onComplete(function(yn)
				{
					ti.Media.beep();
				});
				sound.play();
			}
			catch(E)
			{
				alert(E);
			}
   });
</script>

<!--
<button onclick="ti.Window.currentWindow.show(1)">Show window</button>
<button onclick="ti.Window.currentWindow.hide(1)">Hide window</button>
<button onclick="ti.Window.currentWindow.setMaximizable(false)">Not maximimizable</button>
-->

<!--
<object width="425" height="344"><param name="movie" value="http://www.youtube.com/v/9-4IFUak_U0&hl=en&fs=1"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/9-4IFUak_U0&hl=en&fs=1" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="344"></embed></object>
-->


<a target="ti:systembrowser" href="http://google.com">Google.com</a>
<a href="app://test.html">Test</a>
<a href="file:///test.html">File Test</a>

<a onclick="window.open('test.html');return false;" href="#">New Window</a>
<a onclick="window.w.show(true);return false;" href="#">Show Window</a>

<iframe src="frame.html" width="200" height="200"></iframe>


</body>
</html>
