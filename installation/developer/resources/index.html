<html>
<head>

	<script type="text/javascript" charset="utf-8" src="js/appcelerator-debug.js"></script>
	<script type="text/javascript" charset="utf-8" src="js/index.js"></script>

	<link rel="stylesheet" href="css/index.css" type="text/css" media="screen" charset="utf-8" />
</head>

<!-- ADJUST WINDOW HEIGHT BASED ON CURRENT STATE -->
<body on="l:menu[val=create] then script[Titanium.UI.currentWindow.setHeight(380)] or
		  l:menu[val=manage] then script[Titanium.UI.currentWindow.setHeight(500)] if expr[ $('#project_count_hidden').val() != 0] or
		  l:menu[val=manage] then script[Titanium.UI.currentWindow.setHeight(160)] if expr[ $('#project_count_hidden').val() == 0] or
		  l:cancel[val=project] then script[Titanium.UI.currentWindow.setHeight(160)]">

	<!-- HEADER MENU -->
	<div class="menu">
		<div id="project_count">You have no projects  </div>
		<div id="online_count"> developers on-line: <span style="color:#809eb3">5</span>  </div>
	</div>
	
	<!-- CONTENT -->
	<div id="content">
		
		<!-- MAJOR ACTION BUTTONS -->
		<div class="button1" style="display:inline-block;width:150px" 
			on="click then l:menu[val=create] and add[class=active] 
			or (l:menu[val!=create] or l:cancel[val=project]) then remove[class=active]">
			<div class="button2">Create Project</div>
		</div>
		<div class="button1" style="display:inline-block;width:150px" 
			on="click then l:menu[val=manage] and add[class=active] or l:menu[val!=manage] then remove[class=active]">
			<div class="button2">Manage Projects</div>
		</div>
		<div class="button1" style="display:inline-block;width:150px" 
			on="click then l:menu[val=tv] and add[class=active] or l:menu[val!=tv] then remove[class=active]">
			<div class="button2">Titanium TV</div>
		</div>
		<div class="button1" style="display:inline-block;width:150px" 
			on="click then l:menu[val=social] and add[class=active] or l:menu[val!=social] then remove[class=active]">
			<div class="button2">Social</div>
		</div>
		<div style="clear:both"></div>

		<!-- ************* -->
		<!-- CONTENT FILES -->
		<!-- ************* -->


		<!-- CREATE A NEW PROJECT -->
		<div style="display:none;"
			on="l:menu[val=create] then effect[fadeIn] else hide or l:cancel[val=project] then effect[fadeOut]">

			<!-- VARIOUS CREATE PROJECT MESSAGES: HINT, ERROR, SUCCESS, PROGRESS -->
			<div style="height:18px;line-height:18px" >
				<div class="section hint_text" 
					on="l:create.project.request then hide or l:menu[val=create] then show
					or l:create.project.response[result=success] then effect[fadeIn] after 2300ms">
					Enter a project name and file location for your new project.
				</div>
				<div class="section action_text" style="display:none" 
				on="(l:menu[val=create] or l:create.project.response) then hide or l:create.project.request then show">
					<img src="images/lightning.png"/>
					<span style="position:relative;top:-4px">Creating project...</span>
				</div>
				<div class="section success_text" style="display:none" 
				on="(l:menu[val=create] or l:create.project.request) then hide 
					or l:create.project.response[result=success] then show
					or l:create.project.response[result=success] then effect[fadeOut] after 2s">
					<img src="images/accept.png"/>
					<span style="position:relative;top:-4px">Project created!</span>
				</div>
				<div class="section error_text" style="display:none" 
				on="(l:menu[val=create] or l:create.project.request) then hide 
					or l:create.project.response[result=error] then show">
					<img src="images/error.png"/>
					<span style="position:relative;top:-4px">
						<span on="l:create.project.response then value[message]"></span>
					</span>
				</div>

			</div>

			<!-- PROJECT NAME -->
			<div class="section text">
				<div>Project Name:</div>
				<div>
					<input type="text" id="project_name" validator="required" fieldset="new_project"
						on="(l:create.project.response[result=success] or l:menu[val=create]) then reset"/> 
				</div>
			</div>

			<!-- PROJECT LOCATION -->
			<div class="section text">
				<div>Project Location:</div>
				<div>
					<input type="text" id="project_location" style="float:left;width:600px" 
						validator="required" fieldset="new_project" on="l:file.selected then value[value]
						or (l:create.project.response[result=success] or l:menu[val=create]) then reset"/> 
					<div class="button1" 
						style="float:left;width:23px;height:23px;position:relative;top:1px;margin-left:10px" >
						<div class="button2" style="height:21px" 
							on="click then l:show.filedialog">
							<img src="images/folder_go.png" style="position:relative;top:3px;left:1px"/>
						</div>
					</div>
				</div>
			</div>
			<div style="clear:both"></div>

			<!-- CREATE PROJECT BUTTONS -->
			<div class="section text">
				<div class="button1" style="float:left;margin-right:10px" >
					<div class="button2" id="create_project_button"
					on="click then l:create.project.request if expr[$('#create_project_button').attr('disabled')!=true]" 
						activators="project_location,project_name"  fieldset="new_project">
						Create
					</div>
				</div>
				<div class="button1" style="float:left;"  on="click then l:cancel[val=project]">
					<div class="button2">
						Cancel
					</div>
				</div>

			</div>

		</div>

		<!-- PACKAGE PROJECT -->
		<div style="display:none;margin-top:15px" 
			on="l:menu[val=manage] then effect[fadeIn] else hide or l:cancel[val=manage] then effect[fadeOut]">

			<!-- NO PROJECTS CREATED MESSAGE -->
			<div style="float:left;width:300px" class="error_text" 
				on="l:project.list.response[totalRecords!=0] then hide else effect[fadeIn]">
				<img src="images/error.png"/>
				<span style="position:relative;top:-4px">
					You haven't created any projects.  Get on it!
				</span>
			</div>
			
			<!-- PROJECT LIST ITERATOR -->
			<div on="l:project.list.response[totalRecords=0] then hide else effect[fadeIn]">
				<div style="float:left;width:250px" >
					<div style="margin-bottom:10px;font-size:11px" class="hint_text">
						<span on="click then l:project.search" style="cursor:pointer">
							<img src="images/magnifier.png" style="position:relative;top:4px;"/>
							find projects
						</span>
						<div style="display:none;margin-top:5px;margin-bottom:5px" 
							on="l:project.search then effect[slideToggle]">
							<input type="text"  validator="required" value="type and hit enter"
							 	on="click then clear or keyup[enter] then l:project.search.request"
								fieldset="project_search" id="search_value"/> 
						</div>
					</div>
					
					<!-- PAGINATION -->
					<div id="project_pagination">
						
						<!-- YUI PAGINATION -->
						<div control="yui_paginator[rowsPerPage=10, message=l:page.data.request, previousPageLinkLabel=prev, nextPageLinkLabel=next]" on="l:project.list.response then render	   
								or l:project.search.response then render"
							style="font-size:11px;position:absolute;right:5px;top:-5px;color:#fff" class="page_links">
							<div>
								{CurrentPageReport}  {PreviousPageLink} {NextPageLink} 
							</div>	
						</div>
						<!-- RECORD COUNT -->
						<div style="font-size:11px;position:absolute;left:5px;top:4px;color:#fff" class="page_links">
							<span on="l:project.list.response then value[totalRecords] 
								or l:project.search.response then value[totalRecords]">
							</span>
							<span>found</span>

						</div>
					</div>
					<div style="clear:both"></div>
					<div control="iterator[property=rows]" 
						on="l:project.list.response then render or l:project.search.response then render">
						<div class="project_row"
							on="mouseover then l:row.selected[row=#{iterator_index}] and add[class=row_selected]
							and show[id=action_#{iterator_index}] and hide[id=view_#{iterator_index}]
							or mouseout then remove[class=row_selected] and hide[id=action_#{iterator_index}] 
							and show[id=view_#{iterator_index}]">
							<div id="view_#{iterator_index}">
								<div class="project_name">#{name}</div>
								<div class="project_date" >
									#{date}
								</div>
							</div>
							<div id="action_#{iterator_index}" style="display:none">
								<div class="project_name">#{name}</div>
								<div class="project_controls">
									<img src="images/delete.png" style="margin-right:2px"
										on="click then l:delete.project.request[id=#{id},name=#{name}]"/>
									<img src="images/package_go.png"/>
								</div>
							</div>
							
						</div>
						<div style="height:1px;border-bottom:1px solid #222;margin-bottom:1px"></div>
					</div>

				</div>
				
				<!-- INFO MESSAGE -->
				<div style="float:left;height:70px;margin-left:50px;width:335px" class="infobox">
					<div class="content" style="height:58px">
						<div style="float:left;width:20px">
							<img src="images/information.png" style="position:relative;top:-1px"/>
						</div>
						<div style="float:left;width:290px">
							Manage Projects currently allows you to package and remove existing projects.
							We will be adding more features in the near future.  We welcome your feedback.
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
	
	<!-- POWERED BY LOGO -->
	<div id="powered_by" ></div>
	
</body>
</html>